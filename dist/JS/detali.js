"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}$(window).scroll(function(){700<$(window).scrollTop()?$(".backTop").fadeIn(1e3):$(".backTop").fadeOut(1e3)}),$(".backTop").click(function(){$("html").animate({scrollTop:0},1e3)});var SetTabES6=function(){function t(e){_classCallCheck(this,t),this.ele=e,this.oUllis=document.querySelectorAll(".tab"),this.oDivs=document.querySelectorAll(".subnav-lists")}return _createClass(t,[{key:"fun",value:function(){var n=this;this.ele.addEventListener("click",function(e){"ulli"===(e=e||window.event).target.getAttribute("name")&&(n.oUllis.forEach(function(e,t){n.oDivs[t].className="subnav-lists"}),console.log(e.target),console.log(n.oDivs[e.target.getAttribute("index")]),n.oDivs[e.target.getAttribute("index")].className="subnav-lists active")})}}]),t}(),oFatherUl=document.querySelector(".subnav-ul"),SetTab=new SetTabES6(oFatherUl);SetTab.fun(),document.querySelector(".has-child").addEventListener("mouseenter",function(){$(".subnav-ul").css({display:"block"}),$(".subnav-lists").parent().slideDown(1e3),$(".subnav-lists").first().slideDown(1500),document.querySelectorAll(".subnav-lists").forEach(function(e,t){e.addEventListener("mouseleave",function(){$(".subnav-lists").first().slideUp(500),$(".subnav-lists").slideUp(500),$(".subnav-lists").parent().slideUp(1e3);window.setTimeout(function(){$(".subnav-ul").css({display:"none"})},800)})})});var valObj=getUrlVal(),res={};$.ajax({url:"../server/goods_detail.php",data:{goods_id:valObj.goods_id},type:"post",dataType:"json",success:function(e){res=e,console.log(e);var t='\n    <div class="panel-body">\n    <div class="media">\n        <div class="media-left show">\n            <a href="#" class="show">\n                <img class="media-object" src="'.concat(e.goods_small_logo,'" name="picture" alt="...">\n                <div class="mask"></div>\n            </a>\n        </div>\n        <div class="glass">\n            <img class="bigimg" src="').concat(e.goods_big_logo,'"  alt="...">\n        </div>\n        <div class="media-body">\n        <h4 class="media-heading">').concat(e.goods_name,"</h4>\n        <p class='price'>\n            <i class=\"glyphicon glyphicon-yen\"></i>\n            <span>￥ ").concat(e.goods_price,'</span>\n        </p>\n        <div class="btn-group" role="group" aria-label="...">\n            <button type="button" class="btn btn-default">XL</button>\n            <button type="button" class="btn btn-default">L</button>\n            <button type="button" class="btn btn-default">M</button>\n            <button type="button" class="btn btn-default">S</button>\n            <button type="button" class="btn btn-default">XS</button>\n        </div>\n        <p class="btn-buy">\n            <a href="javascript:;" class="btn btn-warning btn-lg" role="button">立即购买</a>\n            <a href="javascript:;" class="btn btn-danger btn-lg" name="join" role="button" id="addToCart">加入购物车</a>\n            <a href="../pages/cart.html" class="cart" id="shopCart"> \n                <span>点击</span>\n                <span id="shopNum">0</span>\n                \n                购物车\n                \n            </a>\n        </p>\n        </div>\n    </div>\n    <ul class="nav nav-tabs">\n        <li role="presentation" ><a href="#" style="background:#ccc">商品详细信息</a></li>\n        <li role="presentation"><a href="#">商品参数信息</a></li>\n        <li role="presentation"><a href="#">相关商品</a></li>\n    </ul>\n    <div>\n        ').concat(e.goods_introduce,"\n    </div>\n    </div>\n    ");$(".panel").append(t)}});var oFather=document.querySelector(".panel");console.log(oFather),oFather.addEventListener("mouseenter",function(e){var t=document.querySelector(".media");new SetZoom(t).init()}),oFather.addEventListener("click",function(e){if("join"===e.target.getAttribute("name")){var t=myGetCookie(),n=[];if(void 0===t.login){window.confirm("您还没有登录,点击确定,跳转登录,点击取消,啥也不干")&&(window.location.href="./login.html?url=".concat(window.location.href))}else{if(null===localStorage.getItem("cart"))res.num=1,res.buy=!0,n.push(res);else{var a=document.querySelector("#addToCart"),b=document.querySelector("#shopCart"),p=document.querySelector("#shopNum");a.onclick=function(e){var t=(e=e||window.event).clientX,n=e.clientY,a=b.offsetLeft,o=b.offsetTop,s=a-200,l=o-100,i=-((o-l)*t-(a-s)*n+a*l-s*o)/((a-s)*(t-a)*(t-s)),r=((o-l)*t*t+a*a*l-s*s*o-(a*a-s*s)*n)/((a-s)*(t-a)*(t-s)),c=((a*l-s*o)*t*t-(a*a*l-s*s*o)*t+(a*a*s-a*s*s)*n)/((a-s)*(t-a)*(t-s)),u=document.createElement("div");u.className="active",document.body.appendChild(u),u.style.left=t+"px",u.style.top=n+"px";var d=setInterval(function(){n=i*(t+=10)*t+r*t+c,u.style.left=t+"px",u.style.top=n+"px",a<=t&&(clearInterval(d),u.remove(),p.innerHTML=Number(p.innerHTML)+1)},30)};var o=!0;(n=JSON.parse(localStorage.getItem("cart"))).forEach(function(e,t){e.goods_id===res.goods_id&&(e.num++,o=!1),o&&(res.num=1,res.buy=!0,n.push(res))})}localStorage.setItem("cart",JSON.stringify(n))}}});
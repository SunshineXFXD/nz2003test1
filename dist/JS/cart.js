"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}var SetTabES6=function(){function n(t){_classCallCheck(this,n),this.ele=t,this.oUllis=document.querySelectorAll(".tab"),this.oDivs=document.querySelectorAll(".subnav-lists")}return _createClass(n,[{key:"fun",value:function(){var e=this;this.ele.addEventListener("click",function(t){"ulli"===(t=t||window.event).target.getAttribute("name")&&(e.oUllis.forEach(function(t,n){e.oDivs[n].className="subnav-lists"}),console.log(t.target),console.log(e.oDivs[t.target.getAttribute("index")]),e.oDivs[t.target.getAttribute("index")].className="subnav-lists active")})}}]),n}(),oFatherUl=document.querySelector(".subnav-ul"),SetTab=new SetTabES6(oFatherUl);SetTab.fun(),document.querySelector(".has-child").addEventListener("mouseenter",function(){$(".subnav-ul").css({display:"block"}),$(".subnav-lists").parent().slideDown(1e3),$(".subnav-lists").first().slideDown(1500),document.querySelectorAll(".subnav-lists").forEach(function(t,n){t.addEventListener("mouseleave",function(){$(".subnav-lists").first().slideUp(500),$(".subnav-lists").slideUp(500),$(".subnav-lists").parent().slideUp(1e3);window.setTimeout(function(){$(".subnav-ul").css({display:"none"})},800)})})});var cartArr=JSON.parse(localStorage.getItem("cart")),oFootDiv=document.querySelector(".panel-footer"),oPanel=document.querySelector(".panel");function setCartList(t,n){if(0===t.length){$(n).html("<li><h1>您的男朋友已经给您清空了购物车,赶紧再去选购吧,顺便记得帮他还信用卡</h1></li>")}else{var e=0,a=0,o=0,s="";s+='<ul class="cart-list">',t.forEach(function(t){t.buy&&(e++,a+=t.num,o+=t.goods_price*t.num),s+='<li class="cart-item clearF">\n        <div class="left">\n          <input name="che" goods_id="'.concat(t.goods_id,'" type="checkbox" ').concat(t.buy?"checked":"",'>\n        </div>\n        <div class="right">\n          <div class="media clearF">\n            <div class="media-left">\n              <a href="#">\n                <img class="media-object" src="').concat(t.goods_small_logo,'" alt="...">\n              </a>\n            </div>\n            <div class="media-body">\n              <h4 class="media-heading">').concat(t.goods_name,'</h4>\n              <p>\n                <i class="glyphicon glyphicon-yen"></i>\n                <span>￥ ').concat(t.goods_price,'</span>\n              </p>\n              <div class="btn-group pull-right" role="group" aria-label="...">\n                <button type="button" name="jian" goods_id=').concat(t.goods_id,'  class="btn btn-default" ').concat(1===t.num?"disabled":"",'>-</button>\n                <button type="button" class="btn btn-default" disabled>').concat(t.num,'</button>\n                <button type="button" name="jia" goods_id=').concat(t.goods_id,' class="btn btn-default" ').concat(t.num===t.goods_number?"disabled":"",' >+</button>\n              </div>\n              <button name="del" goods_id=').concat(t.goods_id,' class="del btn btn-danger">我不要了</button>\n\n            </div>\n          </div>\n        </div>\n      </li>')}),s+='\n</ul>\n<div class="pay">\n<h2 class="buyall">您购买了<span> '.concat(e," </span>种商品 一共是 <span> ").concat(a,' </span> 件货物</h2>\n<h2 class="payall">您一共需要支付: <span> ').concat(o.toFixed(2),' </span> 元  &nbsp; &nbsp;</h2>\n</div>\n<div class="paystyle">\n    <p> 请选择支付方式 </p>\n    <div>\n        <span>微信</span>\n        <span>支付宝</span>\n        <span>银行卡</span>\n    </div>\n</div>'),$(n).html(s)}}setCartList(cartArr,oFootDiv),oPanel.addEventListener("click",function(e){("yes"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.buy=!0}),"no"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.buy=!1}),"not"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.buy=!t.buy}),"che"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.goods_id==e.target.getAttribute("goods_id")&&(t.buy=!t.buy)}),"del"===e.target.getAttribute("name"))&&(window.confirm("这么好的产品,您真的不要了吗?")&&cartArr.forEach(function(t,n){t.goods_id==e.target.getAttribute("goods_id")&&cartArr.splice(n,1)}));"jia"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.goods_id==e.target.getAttribute("goods_id")&&t.num++}),"jian"===e.target.getAttribute("name")&&cartArr.forEach(function(t){t.goods_id==e.target.getAttribute("goods_id")&&t.num--}),setCartList(cartArr,oFootDiv),localStorage.setItem("cart",JSON.stringify(cartArr))}),$(window).scroll(function(){700<$(window).scrollTop()?$(".backTop").fadeIn(1e3):$(".backTop").fadeOut(1e3)}),$(".backTop").click(function(){$("html").animate({scrollTop:0},1e3)});
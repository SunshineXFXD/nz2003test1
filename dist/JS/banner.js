"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var setOpacity=function(){function t(e){_classCallCheck(this,t),this.ele=e,this.oUllis=e.querySelectorAll("ul>li"),this.oUl=e.querySelector("ul"),this.oOl=e.querySelector("ol"),this.index=0,this.time,this.bool="原始值"}return _createClass(t,[{key:"init",value:function(){this.setLi(),this.autoLoop(),this.inOut(),this.setActive(),this.hid()}},{key:"setLi",value:function(){var n=this;this.oUllis.forEach(function(e,t){var i=document.createElement("li");i.setAttribute("index",t),i.setAttribute("name","olli"),0===t&&(i.className="active"),n.oOl.appendChild(i)})}},{key:"change",value:function(e){var t=this;"原始值"===this.bool&&(this.bool="不是原始值",move(this.oUllis[this.index],{opacity:0},function(){}),"left"===e?this.index--:"right"===e?this.index++:this.index=e,this.index===this.oUllis.length?this.index=0:-1===this.index&&(this.index=this.oUllis.length-1),move(this.oUllis[this.index],{opacity:1},function(){t.bool="原始值"}),this.setFocusStyle())}},{key:"autoLoop",value:function(){var e=this;this.time=setInterval(function(){e.change("right")},3e3)}},{key:"setFocusStyle",value:function(){var i=this;this.ele.querySelectorAll("ol>li").forEach(function(e,t){e.className="",t===i.index&&(e.className="active")})}},{key:"inOut",value:function(){var e=this;this.ele.addEventListener("mouseenter",function(){clearInterval(e.time)}),this.ele.addEventListener("mouseleave",function(){e.autoLoop()})}},{key:"setActive",value:function(){var t=this;this.ele.addEventListener("click",function(e){"left"===(e=e||window.event).target.getAttribute("name")?t.change("left"):"right"===e.target.getAttribute("name")?t.change("right"):"olli"===e.target.getAttribute("name")&&t.change(e.target.getAttribute("index")-0)})}},{key:"hid",value:function(){var e=this;document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?e.autoLoop():"hidden"===document.visibilityState&&clearInterval(e.time)})}}]),t}();function move(n,l,o){var a={},e=function(i){a[i]=setInterval(function(){var e="opacity"===i?100*myGetStyle(n,i):parseInt(myGetStyle(n,i)),t="opacity"===i?(100*l[i]-e)/5:(l[i]-e)/5;e+=t=0<t?Math.ceil(t):Math.floor(t),n.style[i]="opacity"===i?e/100:"".concat(e,"px"),"opacity"===i?e===100*l[i]&&(clearInterval(a[i]),delete a[i]):e===l[i]&&(clearInterval(a[i]),delete a[i]),0===Object.keys(a).length&&o()},100)};for(var t in l)e(t)}function myGetStyle(e,t){return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}